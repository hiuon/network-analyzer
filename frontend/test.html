<html>
<head>
  <title>Network Monitor</title>
  <script type="text/javascript">
    async function fetchAsync (url) {
    let response = await fetch(url);
    let data = await response.json();
    return data;
    }
    var _data = fetchAsync("http://localhost:5000/devices");
    var select = document.createElement("select");
    console.log(_data)
    Promise.all([_data]).then(
            res => res.forEach((arrObj) => {
              var option = document.createElement("option");
              option.value = JSON.parse(arrObj.Name);
              option.text = JSON.parse(arrObj.IPv4)
              select.appendChild(option);
            })
    )
      var label = document.createElement("label");
      label.innerHTML = "--- Select device ---"
      label.htmlFor = "dev";

      document.getElementById("container").appendChild(label).appendChild(select);


  </script>
  <script type="text/javascript" src="./charts/loader.js"></script>
  <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart', 'line', 'controls'], callback: this.drawChart});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Time');
        data.addColumn('number', 'High border');
        data.addColumn('number', 'Low border');
        data.addColumn('number', 'Real');
        data.addColumn('number', 'RealRS');
        data.addRows([
          ['13:20:00\n 22/04/2022',  0.88, 0.65, 0.743252353532, 0.753252353532],
          ['13:20:06\n 22/04/2022',  0.88, 0.65, 0.7232532523542, 0.753252353532],
          ['13:20:12\n 22/04/2022',  0.88, 0.65, 0.7523542513123, 0.753252353532],
          ['13:20:18\n 22/04/2022',  0.88, 0.65, 0.635325324141, 0.753252353532],
          ['13:20:24\n 22/04/2022',  0.88, 0.65, 0.7325324314134, 0.753252353532],
          ['13:20:30\n 22/04/2022',  0.88, 0.65, 0.79523542423, 0.753252353532],
          ['13:20:36\n 22/04/2022',  0.88, 0.65, 0.732532534141, 0.753252353532],
          ['13:20:42\n 22/04/2022',  0.88, 0.65, 0.72325325241, 0.753252353532],
          ['13:20:48\n 22/04/2022',  0.88, 0.65, 0.7531531656, 0.753252353532],
          ['13:20:54\n 22/04/2022',  0.88, 0.65, 0.63356475853, 0.753252353532],
          ['13:21:00\n 22/04/2022',  0.88, 0.65, 0.74378649876, 0.753252353532],
          ['13:21:06\n 22/04/2022',  0.88, 0.65, 0.796578647634, 0.753252353532]
          ]);
          var options = {
              'width': 1200,
              'height': 500,
              'title' : 'Network Monitoring',
              hAxis: {
                title: 'Time'
              },
              vAxis: {
                title: 'Hurst Parameter'
              },
              series: {
                0: { lineDashStyle: [2, 2] },
                1: { lineDashStyle: [2, 2] }
              },
              pointsVisible: true	
            }
          var chart = new google.visualization.LineChart(document.getElementById('chartBlock'));
          var intervals = document.getElementsByName("interval");
          var defaultInterval = "30";
          console.log(intervals);
          for (var i = 0; i < intervals.length; i++) {
            intervals[i].addEventListener('click', drawUpdatedChart, false);
            if (intervals[i].checked) {
              defaultInterval = intervals[i];
            }
          }
          if ((defaultInterval === null) && (intervals.length > 0)) {
            defaultInterval = regions[0];
            defaultInterval.checked = false;
          }
          drawUpdatedChart({target: defaultInterval});
          function drawUpdatedChart(sender) {
            if (sender.target.value == "30") {
              data.addRows([
          ['13:20:00\n 22/04/2022',  0.88, 0.65, 0.743252353532, 0.753252353532],
          ['13:20:06\n 22/04/2022',  0.88, 0.65, 0.7232532523542, 0.753252353532],
          ['13:20:12\n 22/04/2022',  0.88, 0.65, 0.7523542513123, 0.753252353532],
          ['13:20:18\n 22/04/2022',  0.88, 0.65, 0.635325324141, 0.753252353532],
          ['13:20:24\n 22/04/2022',  0.88, 0.65, 0.7325324314134, 0.753252353532],
          ['13:20:30\n 22/04/2022',  0.88, 0.65, 0.79523542423, 0.753252353532],
          ['13:20:36\n 22/04/2022',  0.88, 0.65, 0.732532534141, 0.753252353532],
          ['13:20:42\n 22/04/2022',  0.88, 0.65, 0.72325325241, 0.753252353532],
          ['13:20:48\n 22/04/2022',  0.88, 0.65, 0.7531531656, 0.753252353532],
          ['13:20:54\n 22/04/2022',  0.88, 0.65, 0.63356475853, 0.753252353532],
          ['13:21:00\n 22/04/2022',  0.88, 0.65, 0.74378649876, 0.753252353532],
          ['13:21:06\n 22/04/2022',  0.88, 0.65, 0.796578647634, 0.753252353532]
          ]);
            }
            chart.draw(data, options);
          }
        }

  </script>
</head>
<body>
  <div id="chartBlock"></div>
  <div id="confBlock"></div>
  <div id="container"></div>
      <div><input type="radio" name="interval" id="30" value="30" /><label for="30">30</label></div>
  <div><input type="radio" name="interval" id="60" value="60" /><label for="60">60</label></div>
  <div><input type="radio" name="interval" id="120" value="120" /><label for="120s">120</label></div>
  <div><input type="radio" name="interval" id="240" value="240" /><label for="240">240</label></div>

</body>
</html>

